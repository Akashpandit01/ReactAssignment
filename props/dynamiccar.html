<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Dynamic Product Card</title>

    <!-- React & Babel CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }

      .container {
        max-width: 600px;
        margin: auto;
        text-align: center;
      }

      .form {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 15px;
      }

      input {
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }

      button {
        padding: 10px;
        background-color: #0a7cff;
        color: #fff;
        border: none;
        cursor: pointer;
        font-weight: bold;
        border-radius: 5px;
      }

      .error {
        color: red;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }

      .card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 12px;
        position: relative;
        text-align: center;
      }

      .card img {
        width: 100%;
        border-radius: 8px;
      }

      .badge {
        position: absolute;
        top: 8px;
        right: 8px;
        background-color: red;
        color: white;
        padding: 4px 8px;
        border-radius: 5px;
        font-size: 12px;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <script type="text/babel">

      function ProductCard({ name, price, image, discount }) {
        return (
          <div className="card">
            <img src={image} alt={name} />

            {discount && discount > 0 && (
              <span className="badge">{discount}% OFF</span>
            )}

            <h3>{name}</h3>
            <p>Price: â‚¹{price}</p>
          </div>
        );
      }

      function App() {
        const [products, setProducts] = React.useState([]);
        const [formData, setFormData] = React.useState({
          name: "",
          price: "",
          image: "",
          discount: "",
        });
        
        const [error, setError] = React.useState("");

        const validate = () => {
          if (!formData.name.trim()) return "Product name is required";
          if (!formData.price || formData.price <= 0)
            return "Price must be a positive number";
          if (!formData.image.includes("http"))
            return "Image must be a valid URL (must include http)";
          
          if (formData.discount) {
            const d = Number(formData.discount);
            if (isNaN(d) || d < 0 || d > 100)
              return "Discount must be between 0 and 100";
          }

          return "";
        };

        const addProduct = (e) => {
          e.preventDefault();
          const errMsg = validate();
          if (errMsg) {
            setError(errMsg);
            return;
          }
          setError("");

          const newProduct = {
            name: formData.name,
            price: Number(formData.price),
            image: formData.image,
            discount: formData.discount ? Number(formData.discount) : null,
          };

          setProducts([...products, newProduct]);
          setFormData({ name: "", price: "", image: "", discount: "" });
        };

        return (
          <div className="container">
            <h2>Dynamic Product Card</h2>

            <form onSubmit={addProduct} className="form">
              <input
                type="text"
                placeholder="Product Name"
                value={formData.name}
                onChange={(e) =>
                  setFormData({ ...formData, name: e.target.value })
                }
              />

              <input
                type="number"
                placeholder="Price"
                value={formData.price}
                onChange={(e) =>
                  setFormData({ ...formData, price: e.target.value })
                }
              />

              <input
                type="text"
                placeholder="Image URL"
                value={formData.image}
                onChange={(e) =>
                  setFormData({ ...formData, image: e.target.value })
                }
              />

              <input
                type="number"
                placeholder="Discount % (optional)"
                value={formData.discount}
                onChange={(e) =>
                  setFormData({ ...formData, discount: e.target.value })
                }
              />

              <button type="submit">Add Product</button>
            </form>

            {error && <p className="error">{error}</p>}

            <div className="grid">
              {products.map((prod, index) => (
                <ProductCard
                  key={index}
                  name={prod.name}
                  price={prod.price}
                  image={prod.image}
                  discount={prod.discount}
                />
              ))}
            </div>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
